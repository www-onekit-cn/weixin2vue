{"version":3,"sources":["webpack:///./src/onekit/onekit.css?2896","webpack:///./src/page/component/pages/editor/editor.vue?f24e","webpack:///./src/page/component/pages/editor/editor.js","webpack:///./src/page/component/pages/editor/editor.js?e4a3","webpack:///./src/page/component/pages/editor/editor.vue","webpack:///./src/page/component/pages/editor/editor.css?1371"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","editorHeight","attrs","placeholder","on","onStatusChange","onEditorReady","keyboardHeight","_v","staticRenderFns","OnekitPage","onShareAppMessage","title","path","data","formats","readOnly","isIOS","safeHeight","toolBarHeight","readOnlyChange","setData","onLoad","wx","getSystemInfoSync","platform","safeArea","screenHeight","model","bottom","_safeHeight","that","updatePosition","onKeyboardHeightChange","res","height","duration","setTimeout","pageScrollTo","scrollTop","success","editorCtx","scrollIntoView","toolbarHeight","windowHeight","calNavigationBarAndStatusBar","systemInfo","statusBarHeight","navigationBarHeight","createSelectorQuery","select","context","exec","blur","format","e","target","dataset","name","value","detail","insertDivider","console","log","clear","removeFormat","insertDate","date","Date","formatDate","getFullYear","getMonth","getDate","insertText","text","insertImage","chooseImage","count","src","tempFilePaths","id","role","width","component"],"mappings":"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","file":"js/chunk-4720f862.c38eb66a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=5e0170c1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=5e0170c1&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('onekit-page',[_c('onekit-view',{staticClass:\"container\",style:('height:'+_vm.editorHeight+'px;')},[_c('onekit-editor',{staticClass:\"ql-container\",attrs:{\"id\":\"editor\",\"placeholder\":_vm.placeholder},on:{\"statuschange\":_vm.onStatusChange,\"ready\":_vm.onEditorReady}})],1),_c('onekit-view',{staticClass:\"toolbar\",style:('bottom: '+_vm.isIOS ? _vm.keyboardHeight : 0+'px; height: '+_vm.toolBarHeight+'px; padding-bottom: '+_vm.isIOS ? _vm.safeHeight : 0+'px'),attrs:{\"catchtouchend\":\"format\",\"hidden\":false}},[_c('onekit-i',{staticClass:\"iconfont icon-charutupian\",attrs:{\"catchtouchend\":\"insertImage\"}}),_vm._v(\"\\\" : \\\"\\\"\\\" data-name=\\\"header\\\" :data-value=\\\"2\\\">\"),_vm._v(\"\\\" : \\\"\\\"\\\" data-name=\\\"header\\\" :data-value=\\\"3\\\">\"),_vm._v(\"\\\" : \\\"\\\"\\\" data-name=\\\"bold\\\">\"),_vm._v(\"\\\" : \\\"\\\"\\\" data-name=\\\"italic\\\">\"),_vm._v(\"\\\" : \\\"\\\"\\\" data-name=\\\"underline\\\">\"),_c('onekit-i',{staticClass:\"iconfont icon--checklist\",attrs:{\"data-name\":\"list\",\"data-value\":\"check\"}}),_vm._v(\"\\\" ? \\\"ql-active\\\" : \\\"\\\"\\\" data-name=\\\"list\\\" data-value=\\\"ordered\\\">\"),_vm._v(\"\\\" ? \\\"ql-active\\\" : \\\"\\\"\\\" data-name=\\\"list\\\" data-value=\\\"bullet\\\">\")],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import PAGE_JSON from './editor.json';\nimport {OnekitApp,OnekitPage,OnekitComponent} from \"../../../../onekit/onekit.js\";\nimport wx from \"../../../../onekit/wx.js\";\nOnekitPage({\n    onShareAppMessage:function(){\n        return {\n            title:'editor',\n            path:'page/component/pages/editor/editor'\n        };\n    },\n    data:{\n        formats:{},\n        readOnly:false,\n        placeholder:'开始输入...',\n        editorHeight:300,\n        keyboardHeight:0,\n        isIOS:false,\n        safeHeight:0,\n        toolBarHeight:50\n    },\n    readOnlyChange:function(){\n        this.setData({\n            readOnly:!this.data.readOnly\n        });\n    },\n    onLoad:function(){\n        const {platform,safeArea,model,screenHeight} = wx.getSystemInfoSync();\n        var safeHeight;\n        if(safeArea){\n            safeHeight = screenHeight - safeArea.bottom;\n        } else {\n            safeHeight = 32;\n        }\n        this._safeHeight = safeHeight;\n        var isIOS = platform === 'ios';\n        this.setData({\n            isIOS:isIOS,\n            safeHeight:safeHeight,\n            toolBarHeight:isIOS?safeHeight + 50:50\n        });\n        const that = this;\n        this.updatePosition(0);\n        var keyboardHeight = 0;\n        wx.onKeyboardHeightChange((res)=>{\n            if(res.height === keyboardHeight){\n                return;\n            }\n            const duration = res.height > 0?res.duration * 1000:0;\n            keyboardHeight = res.height;\n            setTimeout(()=>{wx.pageScrollTo({\n                scrollTop:0,\n                success:function(){\n                    that.updatePosition(keyboardHeight);\n                    that.editorCtx.scrollIntoView();\n                }\n            })},duration);\n        });\n    },\n    updatePosition:function(keyboardHeight){\n        const toolbarHeight = 50;\n        const {windowHeight,platform} = wx.getSystemInfoSync();\n        var editorHeight = keyboardHeight > 0?(windowHeight - keyboardHeight) - toolbarHeight:windowHeight;\n        if(keyboardHeight === 0){\n            this.setData({\n                editorHeight:editorHeight,\n                keyboardHeight:keyboardHeight,\n                toolBarHeight:this.data.isIOS?50 + this._safeHeight:50,\n                safeHeight:this._safeHeight\n            });\n        } else {\n            this.setData({\n                editorHeight:editorHeight,\n                keyboardHeight:keyboardHeight,\n                toolBarHeight:50,\n                safeHeight:0\n            });\n        }\n    },\n    calNavigationBarAndStatusBar:function(){\n        const systemInfo = wx.getSystemInfoSync();\n        const {statusBarHeight,platform} = systemInfo;\n        const isIOS = platform === 'ios';\n        const navigationBarHeight = isIOS?44:48;\n        return statusBarHeight + navigationBarHeight;\n    },\n    onEditorReady:function(){\n        const that = this;\n        wx.createSelectorQuery().select('#editor').context(function(res){\n    that.editorCtx = res.context;\n}).exec();\n    },\n    blur:function(){\n        this.editorCtx.blur();\n    },\n    format:function(e){\n        var {name,value} = e.target.dataset;\n        if(!name)return\n        this.editorCtx.format(name,value);\n    },\n    onStatusChange:function(e){\n        const formats = e.detail;\n        this.setData({\n            formats:formats\n        });\n    },\n    insertDivider:function(){\n        this.editorCtx.insertDivider({\n            success:function(){\n                console.log('insert divider success');\n            }\n        });\n    },\n    clear:function(){\n        this.editorCtx.clear({\n            success:function(res){\n                console.log(\"clear success\");\n            }\n        });\n    },\n    removeFormat:function(){\n        this.editorCtx.removeFormat();\n    },\n    insertDate:function(){\n        const date = new Date();\n        const formatDate = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\n        this.editorCtx.insertText({\n            text:formatDate\n        });\n    },\n    insertImage:function(){\n        const that = this;\n        wx.chooseImage({\n            count:1,\n            success:function(res){\n                that.editorCtx.insertImage({\n                    src:res.tempFilePaths[0],\n                    data:{\n                        id:'abcd',\n                        role:'god'\n                    },\n                    width:'80%',\n                    success:function(){\n                        console.log('insert image success');\n                    }\n                });\n            }\n        });\n    }\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./editor.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./editor.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editor.vue?vue&type=template&id=5e0170c1&scoped=true&\"\nimport script from \"./editor.js?vue&type=script&lang=js&\"\nexport * from \"./editor.js?vue&type=script&lang=js&\"\nimport style0 from \"@/onekit/onekit.css?vue&type=style&index=0&id=5e0170c1&scoped=true&lang=css&\"\nimport style1 from \"./editor.css?vue&type=style&index=1&id=5e0170c1&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e0170c1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./editor.css?vue&type=style&index=1&id=5e0170c1&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./editor.css?vue&type=style&index=1&id=5e0170c1&scoped=scoped&lang=css&\""],"sourceRoot":""}