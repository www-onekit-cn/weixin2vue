(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e719cf0"],{"0e0b":function(t,e,a){"use strict";a.r(e),function(t){a("cb29"),a("a15b"),a("d81d"),a("b680"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("711f"),a("79f0");function e(t){if("number"!==typeof t||t<0)return t;var e=parseInt(t/3600,10);t%=3600;var a=parseInt(t/60,10);t=parseInt(t%60,10);var o=t;return[e,a,o].map((function(t){return t=t.toString(),t[1]?t:"0"+t})).join(":")}function o(t,e){return"string"===typeof t&&"string"===typeof e&&(t=parseFloat(t),e=parseFloat(e)),t=t.toFixed(2),e=e.toFixed(2),{longitude:t.toString().split("."),latitude:e.toString().split(".")}}function i(t){return t<1?0:t<=2?1:i(t-1)+i(t-2)}function n(t,e){t=t.toString();var a=Math.max(e-t.length,0);return new Array(a).fill(0).join("")+t}function r(t,e){var a=t.getFullYear(),o=t.getMonth()+1,i=t.getDate(),r=t.getHours(),s=t.getMinutes(),c=t.getSeconds(),l=t.getMilliseconds(),p=[a,o,i].map((function(t){n(t,2)})).join("-")+" "+[r,s,c].map((function(t){n(t,2)})).join(":");return e&&(p+="."+n(l,3)),p}function s(t,e){t=t.split("."),e=e.split(".");var a=Math.max(t.length,e.length);while(t.length<a)t.push("0");while(e.length<a)e.push("0");for(var o=0;o<a;o++){var i=parseInt(t[o],10),n=parseInt(e[o],10);if(i>n)return 1;if(i<n)return-1}return 0}t.exports={formatTime:e,formatLocation:o,fib:i,formatDateTime:r,compareVersion:s}}.call(this,a("dd40")(t))},4860:function(t,e,a){},"674f":function(t,e,a){"use strict";var o=a("8504"),i=a.n(o);i.a},8504:function(t,e,a){},a15b:function(t,e,a){"use strict";var o=a("23e7"),i=a("44ad"),n=a("fc6a"),r=a("a640"),s=[].join,c=i!=Object,l=r("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(n(this),void 0===t?",":t)}})},bf40:function(t,e,a){"use strict";var o=a("4860"),i=a.n(o);i.a},d81d:function(t,e,a){"use strict";var o=a("23e7"),i=a("b727").map,n=a("1dde"),r=a("ae40"),s=n("map"),c=r("map");o({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},f7bb:function(t,e,a){"use strict";a.r(e);var o,i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("onekit-page",[a("import",{attrs:{src:"../../../common/head.vue"}}),a("import",{attrs:{src:"../../../common/foot.vue"}}),a("onekit-view",{staticClass:"container"},[a("onekit-view",{staticClass:"page-body"},[a("onekit-view",{staticClass:"page-section"},[!1===t.recording&&!1===t.playing&&!1===t.hasRecord?a("onekit-block",[a("onekit-view",{staticClass:"page-body-time"},[a("onekit-text",{staticClass:"time-big"},[t._v(t._s(t.formatedRecordTime))])],1),a("onekit-view",{staticClass:"page-body-buttons"},[a("onekit-view",{staticClass:"page-body-button"}),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.startRecord}},[a("onekit-image",{attrs:{src:"/image/record.png"}})],1),a("onekit-view",{staticClass:"page-body-button"})],1)],1):t._e(),!0===t.recording?a("onekit-block",[a("onekit-view",{staticClass:"page-body-time"},[a("onekit-text",{staticClass:"time-big"},[t._v(t._s(t.formatedRecordTime))])],1),a("onekit-view",{staticClass:"page-body-buttons"},[a("onekit-view",{staticClass:"page-body-button"}),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.stopRecord}},[a("onekit-view",{staticClass:"button-stop-record"})],1),a("onekit-view",{staticClass:"page-body-button"})],1)],1):t._e(),!0===t.hasRecord&&!1===t.playing?a("onekit-block",[a("onekit-view",{staticClass:"page-body-time"},[a("onekit-text",{staticClass:"time-big"},[t._v(t._s(t.formatedPlayTime))]),a("onekit-text",{staticClass:"time-small"},[t._v(t._s(t.formatedRecordTime))])],1),a("onekit-view",{staticClass:"page-body-buttons"},[a("onekit-view",{staticClass:"page-body-button"}),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.playVoice}},[a("onekit-image",{attrs:{src:"/image/play.png"}})],1),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.clear}},[a("onekit-image",{attrs:{src:"/image/trash.png"}})],1)],1)],1):t._e(),!0===t.hasRecord&&!0===t.playing?a("onekit-block",[a("onekit-view",{staticClass:"page-body-time"},[a("onekit-text",{staticClass:"time-big"},[t._v(t._s(t.formatedPlayTime))]),a("onekit-text",{staticClass:"time-small"},[t._v(t._s(t.formatedRecordTime))])],1),a("onekit-view",{staticClass:"page-body-buttons"},[a("onekit-view",{staticClass:"page-body-button",on:{tap:t.stopVoice}},[a("onekit-image",{attrs:{src:"/image/stop.png"}})],1),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.pauseVoice}},[a("onekit-image",{attrs:{src:"/image/pause.png"}})],1),a("onekit-view",{staticClass:"page-body-button",on:{tap:t.clear}},[a("onekit-image",{attrs:{src:"/image/trash.png"}})],1)],1)],1):t._e()],1)],1)],1)],1)},r=[],s=a("711f"),c=a("79f0"),l=a("0e0b"),p=c["a"].getRecorderManager(),d=c["a"].createInnerAudioContext();Object(s["OnekitPage"])({onShareAppMessage:function(){return{title:"录音",path:"packageAPI/pages/voice/voice"}},data:{recording:!1,playing:!1,hasRecord:!1,recordTime:0,playTime:0,formatedRecordTime:"00:00:00",formatedPlayTime:"00:00:00"},onHide:function(){this.data.playing?this.stopVoice():this.data.recording&&this.stopRecordUnexpectedly()},onLoad:function(){var t=this;p.onStart((function(){console.log("recorderManage: onStart"),i=setInterval((function(){var e=t.data.recordTime+=1;t.setData({formatedRecordTime:l.formatTime(t.data.recordTime),recordTime:e})}),1e3)})),p.onStop((function(e){console.log("recorderManage: onStop"),t.setData({hasRecord:!0,recording:!1,tempFilePath:e.tempFilePath,formatedPlayTime:l.formatTime(t.data.playTime)}),clearInterval(i)})),d.onPlay((function(){console.log("innerAudioContext: onPlay"),o=setInterval((function(){var e=t.data.playTime+1;t.data.playTime===t.data.recordTime?t.stopVoice():(console.log("update playTime",e),t.setData({formatedPlayTime:l.formatTime(e),playTime:e}))}),1e3)})),d.onStop((function(){}))},startRecord:function(){this.setData({recording:!0});var t={duration:1e4,sampleRate:44100,numberOfChannels:1,encodeBitRate:192e3,format:"aac",frameSize:50};p.start(t)},stopRecord:function(){p.stop()},stopRecordUnexpectedly:function(){var t=this;c["a"].stopRecord({success:function(){console.log("stop record success"),clearInterval(i),t.setData({recording:!1,hasRecord:!1,recordTime:0,formatedRecordTime:l.formatTime(0)})}})},playVoice:function(){d.src=this.data.tempFilePath,this.setData({playing:!0},(function(){d.play()}))},pauseVoice:function(){clearInterval(o),d.pause(),this.setData({playing:!1})},stopVoice:function(){clearInterval(o),d.stop(),this.setData({playing:!1,formatedPlayTime:l.formatTime(0),playTime:0})},clear:function(){clearInterval(o),d.stop(),this.setData({playing:!1,hasRecord:!1,tempFilePath:"",formatedRecordTime:l.formatTime(0),recordTime:0,playTime:0})}});var m=void 0,u=(a("674f"),a("bf40"),a("2877")),f=Object(u["a"])(m,n,r,!1,null,"0956efb2",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-9e719cf0.bee42e3e.js.map