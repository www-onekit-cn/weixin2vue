(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-103d5f46"],{"0a79":function(t,e,a){"use strict";var r=a("529a"),i=a.n(r);i.a},"148a":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("onekit-page",[a("import",{attrs:{src:"../../../common/head.vue"}}),a("import",{attrs:{src:"../../../common/foot.vue"}}),a("onekit-view",{staticClass:"container"},[a("onekit-view",{staticClass:"page-body"},[a("onekit-view",{staticClass:"page-body-wrapper"},[a("onekit-view",{staticStyle:{"margin-bottom":"10px"}},[t._v(" camera 组件 ")]),a("onekit-camera",{attrs:{flash:"off","device-position":t.position},on:{error:t.error}}),t.showCanvas?a("onekit-view",{staticClass:"info-container"},[a("onekit-view",{staticStyle:{margin:"10px 0"}},[t._v("使用实时数据帧在 canvas 组件的展示")]),a("onekit-view",[t._v(" 帧高度："+t._s(t.frameHeight)+" 帧宽度："+t._s(t.frameWidth)+" ")]),a("onekit-canvas",{style:"width: "+t.width+"px; height: "+t.height+"px;",attrs:{id:"webgl",type:"webgl","canvas-id":"canvas"}})],1):t._e(),a("onekit-view",{staticClass:"btn-area first-btn"},[a("onekit-button",{attrs:{type:"primary"},on:{tap:t.handleShowCanvas}},[t._v(t._s(t.showCanvas?"关闭实时帧数据模式":"开启实时帧数据模式"))])],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-button",{attrs:{type:"primary"},on:{tap:t.togglePosition}},[t._v("切换摄像头")])],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-button",{attrs:{type:"primary"},on:{tap:t.takePhoto}},[t._v("拍照")])],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-button",{attrs:{type:"primary"},on:{tap:t.startRecord}},[t._v("开始录像")])],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-button",{attrs:{type:"primary"},on:{tap:t.stopRecord}},[t._v("结束录像")])],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-navigator",{attrs:{url:"/page/component/pages/camera-scan-code/camera-scan-code","hover-class":"none"}},[a("onekit-button",{attrs:{type:"primary"}},[t._v("扫描一维码")])],1)],1),a("onekit-view",{staticClass:"preview-tips"},[t._v("点击录像或拍照即可在下方预览效果")]),t.src?a("onekit-image",{staticClass:"photo",attrs:{mode:"widthFix",src:t.src}}):t._e(),t.videoSrc?a("onekit-video",{staticClass:"video",attrs:{src:t.videoSrc}}):t._e()],1)],1)],1)],1)},i=[],n=(a("d3b7"),a("ac1f"),a("cfc3"),a("5cc6"),a("84c3"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("711f")),o=a("79f0"),s="\n  attribute vec3 aPos;\n  attribute vec2 aVertexTextureCoord;\n  varying highp vec2 vTextureCoord;\n\n  void main(void){\n    gl_Position = vec4(aPos, 1);\n    vTextureCoord = aVertexTextureCoord;\n  }\n",c="\n  varying highp vec2 vTextureCoord;\n  uniform sampler2D uSampler;\n\n  void main(void) {\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n  }\n",d=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],f=[0,1,2,0,2,3],u=[0,0,1,0,1,1,0,1];function h(t,e,a){var r=t.createShader(a);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.error("Error compiling shader: "+t.getShaderInfoLog(r)),r}var v={};function l(t,e,a){var r=t.getContext("webgl");if(r){var i=o["a"].getSystemInfoSync();r.canvas.width=i.pixelRatio*e,r.canvas.height=i.pixelRatio*a,r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight);var n=h(r,s,r.VERTEX_SHADER),l=h(r,c,r.FRAGMENT_SHADER),p=r.createProgram();if(r.attachShader(p,n),r.attachShader(p,l),r.linkProgram(p),r.getProgramParameter(p,r.LINK_STATUS)){r.useProgram(p);var m=r.createTexture();r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,m),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),v.vertexBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,v.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(d),r.STATIC_DRAW),v.vertexIndiceBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,v.vertexIndiceBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(f),r.STATIC_DRAW);var g=r.getAttribLocation(p,"aPos");r.vertexAttribPointer(g,3,r.FLOAT,!1,0,0),r.enableVertexAttribArray(g),v.trianglesTexCoordBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,v.trianglesTexCoordBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(u),r.STATIC_DRAW);var T=r.getAttribLocation(p,"aVertexTextureCoord");r.enableVertexAttribArray(T),r.vertexAttribPointer(T,2,r.FLOAT,!1,0,0);var E=r.getUniformLocation(p,"uSampler");return r.uniform1i(E,0),function(t,e,a){r.bindTexture(r.TEXTURE_2D,m),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,a,0,r.RGBA,r.UNSIGNED_BYTE,t),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}}console.error("Unable to initialize the shader program.")}else console.error("Unable to get webgl context.")}Object(n["OnekitPage"])({onShareAppMessage:function(){return{title:"camera",path:"page/component/pages/camera/camera"}},data:{src:"",videoSrc:"",position:"back",mode:"scanCode",result:{},frameWidth:0,frameHeight:0,width:288,height:358,showCanvas:!1},onReady:function(){this.ctx=o["a"].createCameraContext()},init:function(t){var e=this;this.listener&&this.listener.stop();var a=t.node,r=l(a,this.data.width,this.data.height);this.listener=this.ctx.onCameraFrame((function(t){r(new Uint8Array(t.data),t.width,t.height);var a=e.data,i=a.frameWidth,n=a.frameHeight;i===t.width&&n==t.height||e.setData({frameWidth:t.width,frameHeight:t.height})})),this.listener.start()},takePhoto:function(){var t=this;this.ctx.takePhoto({quality:"high",success:function(e){t.setData({src:e.tempImagePath})}})},startRecord:function(){this.ctx.startRecord({success:function(){console.log("startRecord")}})},stopRecord:function(){var t=this;this.ctx.stopRecord({success:function(e){t.setData({src:e.tempThumbPath,videoSrc:e.tempVideoPath})}})},togglePosition:function(){this.setData({position:"front"===this.data.position?"back":"front"})},error:function(t){console.log(t.detail)},handleShowCanvas:function(){var t=this;this.setData({showCanvas:!this.data.showCanvas},(function(){if(t.data.showCanvas){var e=o["a"].createSelectorQuery();e.select("#webgl").node(t.init).exec()}}))}});var p=void 0,m=(a("4d4d"),a("0a79"),a("2877")),g=Object(m["a"])(p,r,i,!1,null,"9f78638e",null);e["default"]=g.exports},"4d4d":function(t,e,a){"use strict";var r=a("aeb4"),i=a.n(r);i.a},"529a":function(t,e,a){},"84c3":function(t,e,a){var r=a("74e8");r("Uint16",(function(t){return function(e,a,r){return t(this,e,a,r)}}))},aeb4:function(t,e,a){},cfc3:function(t,e,a){var r=a("74e8");r("Float32",(function(t){return function(e,a,r){return t(this,e,a,r)}}))}}]);
//# sourceMappingURL=chunk-103d5f46.ee53c5bf.js.map