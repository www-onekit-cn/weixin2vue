{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./src/onekit/onekit.css?58c5","webpack:///./src/packageAPI/pages/bluetooth/slave/slave.vue?5ed6","webpack:///./src/packageAPI/pages/bluetooth/slave/slave.js","webpack:///./src/packageAPI/pages/bluetooth/slave/slave.js?7cc4","webpack:///./src/packageAPI/pages/bluetooth/slave/slave.vue","webpack:///./src/packageAPI/pages/bluetooth/slave/slave.css?6e2f","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/modules/es.array-buffer.constructor.js","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","$","target","proto","forced","render","_vm","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","_v","_s","serverId","on","openBluetoothAdapter","closeServer","addService","removeService","startAdvertising","stopAdvertising","showInput","closeBluetoothAdapter","chaneMode","onConfirm","_e","_l","item","connects","deviceId","connected","staticRenderFns","uuid3","serviceId","characteristicId","inArray","arr","key","val","i","OnekitPage","onShareAppMessage","title","path","data","servers","onLoad","options","wx","onBLEPeripheralConnectionStateChanged","res","console","log","idx","push","setData","mode","success","createBLEPeripheralServer","fail","showToast","errCode","icon","onBluetoothAdapterStateChange","available","then","server","onCharacteristicReadRequest","callbackId","buffer","ArrayBuffer","dataView","DataView","newValue","Math","ceil","random","setUint8","writeCharacteristicValue","value","needNotify","onCharacteristicWriteRequest","close","navigateBack","e","n","detail","showModal","content","input","descriptorBuffer","dataView2","setInt8","service","uuid","characteristics","properties","write","read","notify","indicate","permission","readable","writeable","readEncryptionRequired","writeEncryptionRequired","descriptors","rej","advertiseRequest","connectable","deviceName","serviceUuids","manufacturerData","manufacturerId","manufacturerSpecificData","powerLevel","onUnload","component","IndexedObject","toIndexedObject","nativeJoin","join","ES3_STRINGS","Object","separator","call","arrayBufferModule","setSpecies","ARRAY_BUFFER","NativeArrayBuffer","$map","map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT"],"mappings":"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","file":"js/chunk-84ae0254.515a31f1.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=0db42e24&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=0db42e24&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('onekit-page',[_c('import',{attrs:{\"src\":\"../../../../common/head.vue\"}}),_c('import',{attrs:{\"src\":\"../../../../common/foot.vue\"}}),_c('onekit-view',{staticClass:\"container\"},[_c('onekit-view',{staticClass:\"page-body\",staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('onekit-text',{staticStyle:{\"text-align\":\"center\",\"margin\":\"16px\"}},[_vm._v(\"当前 serverId \"+_vm._s(_vm.serverId))]),_c('onekit-view',{staticClass:\"action-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.openBluetoothAdapter}},[_vm._v(\"创建server\")]),_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.closeServer}},[_vm._v(\"关闭server\")])],1),_c('onekit-view',{staticClass:\"action-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.addService}},[_vm._v(\"创建服务\")]),_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.removeService}},[_vm._v(\"关闭服务\")])],1),_c('onekit-view',{staticClass:\"action-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.startAdvertising}},[_vm._v(\"开启广播\")]),_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.stopAdvertising}},[_vm._v(\"关闭广播\")])],1),_c('onekit-view',{staticClass:\"action-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.showInput}},[_vm._v(\"写数据\")]),_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.closeBluetoothAdapter}},[_vm._v(\"结束流程\")])],1),_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.chaneMode}},[_vm._v(\"返回主机模式\")]),(_vm.input)?_c('onekit-block',[_c('onekit-input',{staticStyle:{\"width\":\"200px\",\"margin\":\"0 auto\",\"background\":\"var(--weui-BG-2)\",\"padding\":\"5px\"},attrs:{\"placeholder\":\"写个数字\"},on:{\"confirm\":_vm.onConfirm}})],1):_vm._e(),_c('onekit-view',_vm._l((_vm.connects),function(item){return (_vm.connects.length > 0)?_c('onekit-view',[_c('onekit-view',[_c('onekit-text',[_vm._v(_vm._s(item.deviceId)+\" : \"+_vm._s(item.serverId))]),_c('onekit-text',[_vm._v(_vm._s(item.connected ? \"已连接\" : \"断开\"))])],1)],1):_vm._e()}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import PAGE_JSON from './slave.json';\nimport {OnekitApp,OnekitPage,OnekitComponent} from \"../../../../onekit/onekit.js\";\nimport wx from \"../../../../onekit/wx.js\";\nconst uuid3 = '0C76801A-62EB-45E5-96A8-37C8882ABB2B';\nconst serviceId = 'D0611E78-BBB4-4591-A5F8-487910AE4366';\nconst characteristicId = '8667556C-9A37-4C91-84ED-54EE27D90049';\nfunction ab2hex(buffer){\n    var hexArr = Array.prototype.map.call(new Uint8Array(buffer),function(bit){\n        return ('00' + bit.toString(16)).slice(-2);\n    });\n    return hexArr.join('');\n};\nfunction inArray(arr,key,val){\n    for(var i = 0;i < arr.length;i++){\n        if(arr[i][key] === val){\n            return i;\n        }\n    };\n    return -1;\n};\nOnekitPage({\n    onShareAppMessage:function(){\n        return {\n            title:'蓝牙',\n            path:'packageAPI/pages/slave/slave'\n        };\n    },\n    data:{\n        connects:[\n        ],\n        servers:[\n        ]\n    },\n    onLoad:function(options){\n        wx.onBLEPeripheralConnectionStateChanged((res)=>{\n            console.log('connect');\n            const connects = this.data.connects;\n            const idx = inArray(connects,'deviceId',res.deviceId);\n            if(idx >= 0){\n                connects[idx] = res;\n            } else {\n                connects.push(res);\n            }\n            this.setData({\n                connects:connects\n            });\n        });\n    },\n    openBluetoothAdapter:function(){\n        wx.openBluetoothAdapter({\n            mode:'peripheral',\n            success:(res)=>{\n                console.log('openBluetoothAdapter success',res);\n                this.createBLEPeripheralServer();\n            },\n            fail:(res)=>{\n                console.log(res);\n                wx.showToast({\n                    title:`创建失败 错误码: ${res.errCode}`,\n                    icon:'none'\n                });\n                if(res.errCode === 10001){\n                    wx.onBluetoothAdapterStateChange(function(res){\n                        console.log('onBluetoothAdapterStateChange',res);\n                        if(res.available){\n                            this.createBLEPeripheralServer();\n                        }\n                    });\n                }\n            }\n        });\n    },\n    createBLEPeripheralServer:function(){\n        wx.createBLEPeripheralServer().then((res)=>{\n            console.log('createBLEPeripheralServer',res);\n            this.data.servers.push(res.server);\n            this.server = res.server;\n            this.setData({\n                serverId:this.server.serverId\n            });\n            wx.showToast({\n                title:'创建 server '\n            });\n            this.server.onCharacteristicReadRequest((res)=>{\n                const {serviceId,characteristicId,callbackId} = res;\n                const buffer = new ArrayBuffer(1);\n                const dataView = new DataView(buffer);\n                const newValue = Math.ceil(Math.random() * 10);\n                dataView.setUint8(0,newValue);\n                console.log('onCharacteristicReadRequest',res,newValue);\n                this.server.writeCharacteristicValue({\n                    serviceId:serviceId,\n                    characteristicId:characteristicId,\n                    value:buffer,\n                    needNotify:true,\n                    callbackId:callbackId\n                });\n            });\n            this.server.onCharacteristicWriteRequest((res)=>{\n                console.log('onCharacteristicWriteRequest',res);\n                const {serviceId,characteristicId,value,callbackId} = res;\n                wx.showToast({\n                    title:'收到主机数据'\n                });\n                this.server.writeCharacteristicValue({\n                    serviceId:serviceId,\n                    characteristicId:characteristicId,\n                    value:value,\n                    needNotify:true,\n                    callbackId:callbackId\n                });\n            });\n        });\n    },\n    closeServer:function(){\n        this.server.close();\n        wx.showToast({\n            title:'关闭 server'\n        });\n    },\n    chaneMode:function(){\n        wx.navigateBack();\n    },\n    onConfirm:function(e){\n        console.log('onConfirm');\n        const n = e.detail.value * 1;\n        const buffer = new ArrayBuffer(1);\n        const dataView = new DataView(buffer);\n        dataView.setUint8(0,n);\n        this.server.writeCharacteristicValue({\n            serviceId:serviceId,\n            characteristicId:characteristicId,\n            value:buffer,\n            needNotify:true\n        });\n        wx.showModal({\n            title:'写入成功',\n            content:'请在主机查看'\n        });\n    },\n    showInput:function(){\n        this.setData({\n            input:!this.data.input\n        });\n    },\n    addService:function(){\n        const buffer = new ArrayBuffer(1);\n        const dataView = new DataView(buffer);\n        dataView.setUint8(0,2);\n        const descriptorBuffer = new ArrayBuffer(1);\n        const dataView2 = new DataView(descriptorBuffer);\n        dataView2.setInt8(0,3);\n        const service = {\n            uuid:serviceId,\n            characteristics:[\n                {\n                    uuid:characteristicId,\n                    properties:{\n                        write:true,\n                        read:true,\n                        notify:true,\n                        indicate:true\n                    },\n                    permission:{\n                        readable:true,\n                        writeable:true,\n                        readEncryptionRequired:true,\n                        writeEncryptionRequired:true\n                    },\n                    value:buffer,\n                    descriptors:[\n                        {\n                            uuid:uuid3,\n                            permission:{\n                                write:true,\n                                read:true\n                            },\n                            value:descriptorBuffer\n                        }\n                    ]\n                }\n            ]\n        };\n        this.server.addService({\n    service:service\n}).then((res)=>{\n            console.log('add Service',res);\n            wx.showToast({\n                title:'创建服务'\n            });\n        },(rej)=>{\n            console.log(rej);\n            if(rej.errCode === 10001){\n                wx.showToast({\n                    title:'请打开蓝牙'\n                });\n            } else {\n                wx.showModal({\n                    title:'创建失败',\n                    content:`错误码: ${rej.errCode}`\n                });\n            }\n        });\n    },\n    removeService:function(){\n        this.server.removeService({\n    serviceId:serviceId\n}).then((res)=>{\n            wx.showToast({\n                title:'关闭服务'\n            });\n            console.log('removeService',res);\n        });\n    },\n    startAdvertising:function(){\n        const buffer = new ArrayBuffer(1);\n        const dataView = new DataView(buffer);\n        dataView.setInt8(0,4);\n        this.server.startAdvertising({\n    advertiseRequest:{\n        connectable:true,\n        deviceName:'sanford',\n        serviceUuids:[\n            serviceId\n        ],\n        manufacturerData:[\n            {\n                manufacturerId:'sanfordsun-pc0',\n                manufacturerSpecificData:buffer\n            }\n        ]\n    },\n    powerLevel:'medium'\n}).then((res)=>{\n            console.log('startAdvertising',res);\n            wx.showToast({\n                title:'开启广播'\n            });\n        });\n    },\n    stopAdvertising:function(){\n        this.server.stopAdvertising();\n        wx.showToast({\n            title:'关闭广播'\n        });\n    },\n    closeBluetoothAdapter:function(){\n        wx.showToast({\n            title:'结束流程'\n        });\n        wx.closeBluetoothAdapter();\n    },\n    onUnload:function(){\n        this.data.servers.forEach((server)=>{\n        });\n    }\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./slave.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./slave.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./slave.vue?vue&type=template&id=0db42e24&scoped=true&\"\nimport script from \"./slave.js?vue&type=script&lang=js&\"\nexport * from \"./slave.js?vue&type=script&lang=js&\"\nimport style0 from \"@/onekit/onekit.css?vue&type=style&index=0&id=0db42e24&scoped=true&lang=css&\"\nimport style1 from \"./slave.css?vue&type=style&index=1&id=0db42e24&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0db42e24\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./slave.css?vue&type=style&index=1&id=0db42e24&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./slave.css?vue&type=style&index=1&id=0db42e24&scoped=scoped&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar arrayBufferModule = require('../internals/array-buffer');\nvar setSpecies = require('../internals/set-species');\n\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar ArrayBuffer = arrayBufferModule[ARRAY_BUFFER];\nvar NativeArrayBuffer = global[ARRAY_BUFFER];\n\n// `ArrayBuffer` constructor\n// https://tc39.github.io/ecma262/#sec-arraybuffer-constructor\n$({ global: true, forced: NativeArrayBuffer !== ArrayBuffer }, {\n  ArrayBuffer: ArrayBuffer\n});\n\nsetSpecies(ARRAY_BUFFER);\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}