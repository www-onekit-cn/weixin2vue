(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cee7856"],{"4c55":function(t,e,a){},"4de4":function(t,e,a){"use strict";var n=a("23e7"),i=a("b727").filter,o=a("1dde"),r=a("ae40"),s=o("filter"),c=r("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5492:function(t,e,a){"use strict";var n=a("f662"),i=a.n(n);i.a},"83e2":function(t,e,a){"use strict";var n=a("4c55"),i=a.n(n);i.a},"916c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("onekit-page",[a("import",{attrs:{src:"../../../common/head.vue"}}),a("import",{attrs:{src:"../../../common/foot.vue"}}),a("onekit-view",{staticClass:"container"},[a("onekit-view",{staticClass:"page-body"},[a("onekit-view",{staticClass:"page-section"},[a("onekit-view",{staticClass:"page-section-title"},[t._v(" \b 源视频 ")])],1),a("onekit-view",{staticClass:"page-section"},[a("onekit-button",{attrs:{type:"primary","data-video":"one"},on:{tap:t.handleChooseVideo}},[t._v("选择源视频1")]),t.one?a("onekit-video",{attrs:{src:t.one}}):t._e()],1),a("onekit-view",{staticClass:"page-section"},[a("onekit-button",{attrs:{type:"primary","data-video":"two"},on:{tap:t.handleChooseVideo}},[t._v("选择源视频2")]),t.two?a("onekit-video",{attrs:{src:t.two}}):t._e()],1),a("onekit-view",{staticClass:"btn-area"},[a("onekit-button",{attrs:{disabled:!t.canIUse,type:"primary"},on:{":tap":t.handleExport}},[t._v("合成")])],1),t.targetSrc?a("onekit-block",[a("onekit-view",{staticClass:"page-section"},[a("onekit-view",{staticClass:"page-section-title"},[t._v(" \b "),a("onekit-text",[t._v("合成视频")])],1),a("onekit-view",{staticClass:"page-section-title"},[t._v(" \b "),a("onekit-text",[t._v("合成视频轨道为：源视频1视频轨道 + 源视频2音频轨道")])],1)],1),a("onekit-view",{staticClass:"page-section"},[a("onekit-video",{attrs:{src:t.targetSrc}})],1)],1):t._e()],1)],1)],1)},i=[];a("4de4");function o(t){if(Array.isArray(t))return t}a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(a.push(r.value),e&&a.length===e)break}catch(c){i=!0,o=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(i)throw o}}return a}}var s=a("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){return o(t)||r(t,e)||Object(s["a"])(t,e)||c()}var u=a("ade3"),l=a("711f"),f=a("79f0");Object(l["OnekitPage"])({onShareAppMessage:function(){return{title:"音视频合成",path:"packageAPI/pages/media-container/media-container"}},onLoad:function(){var t=f["a"].canIUse("wx.createMediaContainer()");t?this.mediaContainer=f["a"].createMediaContainer():(this.setData({canIUse:!1}),f["a"].showModal({title:"微信版本过低，暂不支持本功能"}))},data:{targetSrc:"",one:"",two:"",canIUse:!0},handleChooseVideo:function(t){var e=this;f["a"].chooseVideo({sourceType:["album","camera"],success:function(a){console.log(a.tempFilePath),e.setData(Object(u["a"])({},t.currentTarget.dataset.video,a.tempFilePath)),"one"===t.currentTarget.dataset.video?e.mediaContainer.extractDataSource({source:e.data.one,success:function(t){e.mediaTrackOne=t}}):e.mediaContainer.extractDataSource({source:e.data.two,success:function(t){e.mediaTrackTwo=t}})}})},handleExport:function(){if(""===this.data.one||""===this.data.two)f["a"].showToast({title:"请先选择源视频",icon:"none"});else{console.log(this.mediaTrackOne,this.mediaTrackTwo);var t=this.mediaTrackOne.tracks.filter((function(t){return"video"===t.kind})),e=d(t,1),a=e[0],n=this.mediaTrackTwo.tracks.filter((function(t){return"audio"===t.kind})),i=d(n,1),o=i[0];console.log(a,o),this.mediaContainer.addTrack(a),this.mediaContainer.addTrack(o);var r=this;this.mediaContainer.export({success:function(t){r.setData({targetSrc:t.tempFilePath})}})}}});var v=void 0,p=(a("83e2"),a("5492"),a("2877")),h=Object(p["a"])(v,n,i,!1,null,"16bdc880",null);e["default"]=h.exports},ade3:function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return n}))},f662:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7cee7856.f5c43cdf.js.map