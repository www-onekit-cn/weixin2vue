{"version":3,"sources":["webpack:///./src/page/component/pages/camera/camera.css?31fb","webpack:///./src/page/component/pages/camera/camera.vue?91b4","webpack:///./src/page/component/pages/camera/camera.js","webpack:///./src/page/component/pages/camera/camera.js?2a04","webpack:///./src/page/component/pages/camera/camera.vue","webpack:///./src/onekit/onekit.css?f453","webpack:///./node_modules/core-js/modules/es.typed-array.uint16-array.js","webpack:///./node_modules/core-js/modules/es.typed-array.float32-array.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","_v","position","on","error","_s","frameHeight","frameWidth","style","width","height","_e","handleShowCanvas","showCanvas","togglePosition","takePhoto","startRecord","stopRecord","src","videoSrc","staticRenderFns","vs","fs","vertex","vertexIndice","texCoords","createShader","gl","type","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","getShaderInfoLog","buffers","createRenderer","canvas","getContext","info","wx","getSystemInfoSync","pixelRatio","viewport","drawingBufferWidth","drawingBufferHeight","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","texture","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","vertexIndiceBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","aVertexPosition","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","trianglesTexCoordBuffer","vertexTexCoordAttribute","samplerUniform","getUniformLocation","uniform1i","arrayBuffer","texImage2D","RGBA","UNSIGNED_BYTE","drawElements","TRIANGLES","UNSIGNED_SHORT","OnekitPage","onShareAppMessage","title","path","data","mode","result","onReady","ctx","createCameraContext","init","res","listener","stop","node","onCameraFrame","frame","Uint8Array","setData","start","quality","success","tempImagePath","log","tempThumbPath","tempVideoPath","e","detail","selector","createSelectorQuery","select","exec","component","createTypedArrayConstructor","byteOffset","length"],"mappings":"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","file":"js/chunk-103d5f46.ee53c5bf.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./camera.css?vue&type=style&index=1&id=9f78638e&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./camera.css?vue&type=style&index=1&id=9f78638e&scoped=scoped&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('onekit-page',[_c('import',{attrs:{\"src\":\"../../../common/head.vue\"}}),_c('import',{attrs:{\"src\":\"../../../common/foot.vue\"}}),_c('onekit-view',{staticClass:\"container\"},[_c('onekit-view',{staticClass:\"page-body\"},[_c('onekit-view',{staticClass:\"page-body-wrapper\"},[_c('onekit-view',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\" camera 组件 \")]),_c('onekit-camera',{attrs:{\"flash\":\"off\",\"device-position\":_vm.position},on:{\"error\":_vm.error}}),(_vm.showCanvas)?_c('onekit-view',{staticClass:\"info-container\"},[_c('onekit-view',{staticStyle:{\"margin\":\"10px 0\"}},[_vm._v(\"使用实时数据帧在 canvas 组件的展示\")]),_c('onekit-view',[_vm._v(\" 帧高度：\"+_vm._s(_vm.frameHeight)+\" 帧宽度：\"+_vm._s(_vm.frameWidth)+\" \")]),_c('onekit-canvas',{style:('width: '+_vm.width+'px; height: '+_vm.height+'px;'),attrs:{\"id\":\"webgl\",\"type\":\"webgl\",\"canvas-id\":\"canvas\"}})],1):_vm._e(),_c('onekit-view',{staticClass:\"btn-area first-btn\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.handleShowCanvas}},[_vm._v(_vm._s(_vm.showCanvas ? \"关闭实时帧数据模式\": \"开启实时帧数据模式\"))])],1),_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.togglePosition}},[_vm._v(\"切换摄像头\")])],1),_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.takePhoto}},[_vm._v(\"拍照\")])],1),_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.startRecord}},[_vm._v(\"开始录像\")])],1),_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-button',{attrs:{\"type\":\"primary\"},on:{\"tap\":_vm.stopRecord}},[_vm._v(\"结束录像\")])],1),_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-navigator',{attrs:{\"url\":\"/page/component/pages/camera-scan-code/camera-scan-code\",\"hover-class\":\"none\"}},[_c('onekit-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"扫描一维码\")])],1)],1),_c('onekit-view',{staticClass:\"preview-tips\"},[_vm._v(\"点击录像或拍照即可在下方预览效果\")]),(_vm.src)?_c('onekit-image',{staticClass:\"photo\",attrs:{\"mode\":\"widthFix\",\"src\":_vm.src}}):_vm._e(),(_vm.videoSrc)?_c('onekit-video',{staticClass:\"video\",attrs:{\"src\":_vm.videoSrc}}):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import PAGE_JSON from './camera.json';\nimport {OnekitApp,OnekitPage,OnekitComponent} from \"../../../../onekit/onekit.js\";\nimport wx from \"../../../../onekit/wx.js\";\nconst vs = `\r\n  attribute vec3 aPos;\r\n  attribute vec2 aVertexTextureCoord;\r\n  varying highp vec2 vTextureCoord;\r\n\r\n  void main(void){\r\n    gl_Position = vec4(aPos, 1);\r\n    vTextureCoord = aVertexTextureCoord;\r\n  }\r\n`;\nconst fs = `\r\n  varying highp vec2 vTextureCoord;\r\n  uniform sampler2D uSampler;\r\n\r\n  void main(void) {\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\r\n  }\r\n`;\nconst vertex = [\n    -1,\n    -1,\n    0.0,\n    1,\n    -1,\n    0.0,\n    1,\n    1,\n    0.0,\n    -1,\n    1,\n    0.0\n];\nconst vertexIndice = [\n    0,\n    1,\n    2,\n    0,\n    2,\n    3\n];\nconst texCoords = [\n    0.0,\n    0.0,\n    1.0,\n    0.0,\n    1.0,\n    1.0,\n    0.0,\n    1.0\n];\nfunction createShader(gl,src,type){\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader,src);\n    gl.compileShader(shader);\n    if(!gl.getShaderParameter(shader,gl.COMPILE_STATUS)){\n        console.error('Error compiling shader: ' + gl.getShaderInfoLog(shader));\n    }\n    return shader;\n};\nconst buffers = {};\nfunction createRenderer(canvas,width,height){\n    const gl = canvas.getContext(\"webgl\");\n    if(!gl){\n        console.error('Unable to get webgl context.');\n        return;\n    }\n    const info = wx.getSystemInfoSync();\n    gl.canvas.width = info.pixelRatio * width;\n    gl.canvas.height = info.pixelRatio * height;\n    gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);\n    const vertexShader = createShader(gl,vs,gl.VERTEX_SHADER);\n    const fragmentShader = createShader(gl,fs,gl.FRAGMENT_SHADER);\n    const program = gl.createProgram();\n    gl.attachShader(program,vertexShader);\n    gl.attachShader(program,fragmentShader);\n    gl.linkProgram(program);\n    if(!gl.getProgramParameter(program,gl.LINK_STATUS)){\n        console.error('Unable to initialize the shader program.');\n        return;\n    }\n    gl.useProgram(program);\n    const texture = gl.createTexture();\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(gl.TEXTURE_2D,texture);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,true);\n    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);\n    gl.bindTexture(gl.TEXTURE_2D,null);\n    buffers.vertexBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER,buffers.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(vertex),gl.STATIC_DRAW);\n    buffers.vertexIndiceBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,buffers.vertexIndiceBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(vertexIndice),gl.STATIC_DRAW);\n    const aVertexPosition = gl.getAttribLocation(program,'aPos');\n    gl.vertexAttribPointer(aVertexPosition,3,gl.FLOAT,false,0,0);\n    gl.enableVertexAttribArray(aVertexPosition);\n    buffers.trianglesTexCoordBuffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER,buffers.trianglesTexCoordBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(texCoords),gl.STATIC_DRAW);\n    const vertexTexCoordAttribute = gl.getAttribLocation(program,\"aVertexTextureCoord\");\n    gl.enableVertexAttribArray(vertexTexCoordAttribute);\n    gl.vertexAttribPointer(vertexTexCoordAttribute,2,gl.FLOAT,false,0,0);\n    const samplerUniform = gl.getUniformLocation(program,'uSampler');\n    gl.uniform1i(samplerUniform,0);\n    return (arrayBuffer,width,height)=>{\n        gl.bindTexture(gl.TEXTURE_2D,texture);\n        gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width,height,0,gl.RGBA,gl.UNSIGNED_BYTE,arrayBuffer);\n        gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);\n    };\n};\nOnekitPage({\n    onShareAppMessage:function(){\n        return {\n            title:'camera',\n            path:'page/component/pages/camera/camera'\n        };\n    },\n    data:{\n        src:'',\n        videoSrc:'',\n        position:'back',\n        mode:'scanCode',\n        result:{},\n        frameWidth:0,\n        frameHeight:0,\n        width:288,\n        height:358,\n        showCanvas:false\n    },\n    onReady:function(){\n        this.ctx = wx.createCameraContext();\n    },\n    init:function(res){\n        if(this.listener){\n            this.listener.stop();\n        }\n        const canvas = res.node;\n        const render = createRenderer(canvas,this.data.width,this.data.height);\n        this.listener = this.ctx.onCameraFrame((frame)=>{\n            render(new Uint8Array(frame.data),frame.width,frame.height);\n            const {frameWidth,frameHeight} = this.data;\n            if((frameWidth === frame.width) && (frameHeight == frame.height))return\n            this.setData({\n                frameWidth:frame.width,\n                frameHeight:frame.height\n            });\n        });\n        this.listener.start();\n    },\n    takePhoto:function(){\n        this.ctx.takePhoto({\n            quality:'high',\n            success:(res)=>{this.setData({\n                src:res.tempImagePath\n            })}\n        });\n    },\n    startRecord:function(){\n        this.ctx.startRecord({\n            success:()=>{console.log('startRecord')}\n        });\n    },\n    stopRecord:function(){\n        this.ctx.stopRecord({\n            success:(res)=>{this.setData({\n                src:res.tempThumbPath,\n                videoSrc:res.tempVideoPath\n            })}\n        });\n    },\n    togglePosition:function(){\n        this.setData({\n            position:this.data.position === 'front'?'back':'front'\n        });\n    },\n    error:function(e){\n        console.log(e.detail);\n    },\n    handleShowCanvas:function(){\n        const that = this;\n        this.setData({\n            showCanvas:!this.data.showCanvas\n        },()=>{if(this.data.showCanvas){\n            const selector = wx.createSelectorQuery();\n            selector.select('#webgl').node(this.init).exec();\n        }});\n    }\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./camera.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/eslint-loader/index.js??ref--13-0!./camera.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./camera.vue?vue&type=template&id=9f78638e&scoped=true&\"\nimport script from \"./camera.js?vue&type=script&lang=js&\"\nexport * from \"./camera.js?vue&type=script&lang=js&\"\nimport style0 from \"@/onekit/onekit.css?vue&type=style&index=0&id=9f78638e&scoped=true&lang=css&\"\nimport style1 from \"./camera.css?vue&type=style&index=1&id=9f78638e&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9f78638e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=9f78638e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=9f78638e&scoped=true&lang=css&\"","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Uint16Array` constructor\n// https://tc39.github.io/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Uint16', function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var createTypedArrayConstructor = require('../internals/typed-array-constructor');\n\n// `Float32Array` constructor\n// https://tc39.github.io/ecma262/#sec-typedarray-objects\ncreateTypedArrayConstructor('Float32', function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n"],"sourceRoot":""}