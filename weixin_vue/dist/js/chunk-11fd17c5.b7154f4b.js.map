{"version":3,"sources":["webpack:///./src/packageCloud/pages/upload-file/upload-file.css?b88c","webpack:///./src/packageCloud/pages/upload-file/upload-file.vue?05b7","webpack:///./src/packageCloud/pages/upload-file/upload-file.js","webpack:///./src/packageCloud/pages/upload-file/upload-file.js?c431","webpack:///./src/packageCloud/pages/upload-file/upload-file.vue","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/onekit/onekit.css?b757"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","fileId","filePath","_e","on","chooseImage","staticRenderFns","app","getApp","OnekitPage","onShareAppMessage","title","path","data","fileUploaded","fromOtherPage","onLoad","options","from","setData","self","wx","count","sizeType","sourceType","success","res","console","log","tempFilePaths","showLoading","getUserOpenIdViaCloud","then","openid","cloudPath","match","RegExp","cloud","uploadFile","globalData","fileID","hideLoading","fail","err","error","showToast","icon","catch","errMsg","component","DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","f","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","redefine","fails","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","RegExpPrototype","prototype","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","flags","sticky","thisIsRegExp","patternIsRegExp","flagsAreUndefined","undefined","constructor","source","call","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length"],"mappings":"kHAAA,yBAA+Y,EAAG,G,yCCAlZ,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,8BAA8BF,EAAG,SAAS,CAACE,MAAM,CAAC,IAAM,8BAA8BF,EAAG,cAAc,CAACG,YAAY,aAAa,CAACH,EAAG,cAAc,CAACG,YAAY,aAAa,CAACH,EAAG,cAAc,CAACG,YAAY,gBAAgB,CAAEP,EAAgB,aAAEI,EAAG,eAAe,CAACA,EAAG,cAAc,CAACG,YAAY,qCAAqC,CAACH,EAAG,cAAc,CAACG,YAAY,6BAA6B,CAACH,EAAG,cAAc,CAACG,YAAY,iBAAiB,CAACH,EAAG,cAAc,CAACG,YAAY,cAAc,CAACP,EAAIQ,GAAG,YAAY,GAAGJ,EAAG,cAAc,CAACG,YAAY,iBAAiB,CAACH,EAAG,kBAAkB,CAACG,YAAY,gBAAgBE,YAAY,CAAC,OAAS,SAASH,MAAM,CAAC,MAAQN,EAAIU,OAAO,SAAW,OAAO,IAAI,GAAGN,EAAG,cAAc,CAACG,YAAY,8BAA8B,CAACH,EAAG,eAAe,CAACG,YAAY,QAAQD,MAAM,CAAC,IAAMN,EAAIW,SAAS,KAAO,gBAAgB,IAAI,GAAIX,EAAiB,cAAEI,EAAG,cAAc,CAACG,YAAY,YAAY,CAACH,EAAG,mBAAmB,CAACE,MAAM,CAAC,YAAY,iBAAiB,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,OAAO,CAACN,EAAIQ,GAAG,SAAS,IAAI,GAAGR,EAAIY,MAAM,GAAGR,EAAG,eAAe,CAACA,EAAG,cAAc,CAACG,YAAY,kBAAkB,CAACH,EAAG,cAAc,CAACG,YAAY,2BAA2BM,GAAG,CAAC,IAAMb,EAAIc,cAAc,CAACV,EAAG,cAAc,CAACG,YAAY,0BAA0BH,EAAG,cAAc,CAACG,YAAY,yBAAyB,GAAGH,EAAG,cAAc,CAACG,YAAY,mBAAmB,CAACP,EAAIQ,GAAG,WAAW,IAAI,IAAI,IAAI,IAAI,IAAI,IAC5gDO,EAAkB,G,kECEhBC,EAAMC,SACZC,wBAAW,CACPC,kBAAkB,WACd,MAAO,CACHC,MAAM,OACNC,KAAK,6CAGbC,KAAK,CACDC,cAAa,EACbb,OAAO,GACPC,SAAS,GACTa,eAAc,GAElBC,OAAO,SAASC,GACTA,EAAQC,MACP1B,KAAK2B,QAAQ,CACTJ,eAAc,KAI1BV,YAAY,WACR,IAAMe,EAAO5B,KACb6B,OAAGhB,YAAY,CACXiB,MAAM,EACNC,SAAS,CACL,cAEJC,WAAW,CACP,SAEJC,QAAQ,SAASC,GACbC,QAAQC,IAAI,oCAAoCF,EAAIG,cAAc,IAClE,IAAM3B,EAAWwB,EAAIG,cAAc,GACnCR,OAAGS,YAAY,CACXnB,MAAM,QAEVJ,EAAIwB,wBAAwBC,MAAK,SAACC,GAC9C,IAAMC,EAAa,UAAYD,EAAU/B,EAASiC,MAAM,IAAIC,OAAO,WAAY,KAAK,GAwBpF,OAvBAT,QAAQC,IAAI,YAAYM,GACxBb,OAAGgB,MAAMC,WAAW,CAChBJ,UAAUA,EACVhC,SAASA,EACTuB,QAAQ,SAACC,GACLC,QAAQC,IAAI,aAAaF,GACzBnB,EAAIgC,WAAWtC,OAASyB,EAAIc,OAC5BpB,EAAKD,QAAQ,CACTL,cAAa,EACbb,OAAOyB,EAAIc,OACXtC,SAASA,IAEbmB,OAAGoB,eAEPC,KAAK,SAACC,GACFhB,QAAQiB,MAAM,aAAaD,GAC3BtB,OAAGoB,cACHpB,OAAGwB,UAAU,CACTC,KAAK,OACLnC,MAAM,YAIXsB,KACRc,OAAM,SAACJ,GACUhB,QAAQiB,MAAMD,GACdtB,OAAGoB,kBAGXC,KAAK,YAAkB,IAARM,EAAQ,EAARA,OACXrB,QAAQC,IAAI,2BAA2BoB,SCxEqP,a,kCCSxSC,EAAY,eACd,EACA3D,EACAgB,GACA,EACA,KACA,WACA,MAIa,aAAA2C,E,yDCpBf,IAAIC,EAAc,EAAQ,QACtBC,EAAS,EAAQ,QACjBC,EAAW,EAAQ,QACnBC,EAAoB,EAAQ,QAC5BC,EAAiB,EAAQ,QAAuCC,EAChEC,EAAsB,EAAQ,QAA8CD,EAC5EE,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAgB,EAAQ,QACxBC,EAAW,EAAQ,QACnBC,EAAQ,EAAQ,QAChBC,EAAmB,EAAQ,QAA+BC,IAC1DC,EAAa,EAAQ,QACrBC,EAAkB,EAAQ,QAE1BC,EAAQD,EAAgB,SACxBE,EAAehB,EAAOf,OACtBgC,EAAkBD,EAAaE,UAC/BC,EAAM,KACNC,EAAM,KAGNC,EAAc,IAAIL,EAAaG,KAASA,EAExCG,EAAgBd,EAAcc,cAE9BC,EAASxB,GAAeE,EAAS,UAAYoB,GAAeC,GAAiBZ,GAAM,WAGrF,OAFAU,EAAIL,IAAS,EAENC,EAAaG,IAAQA,GAAOH,EAAaI,IAAQA,GAAiC,QAA1BJ,EAAaG,EAAK,SAKnF,GAAII,EAAQ,CACV,IAAIC,EAAgB,SAAgBC,EAASC,GAC3C,IAGIC,EAHAC,EAAevF,gBAAgBmF,EAC/BK,EAAkBvB,EAASmB,GAC3BK,OAA8BC,IAAVL,EAGxB,IAAKE,GAAgBC,GAAmBJ,EAAQO,cAAgBR,GAAiBM,EAC/E,OAAOL,EAGLJ,EACEQ,IAAoBC,IAAmBL,EAAUA,EAAQQ,QACpDR,aAAmBD,IACxBM,IAAmBJ,EAAQnB,EAAS2B,KAAKT,IAC7CA,EAAUA,EAAQQ,QAGhBX,IACFK,IAAWD,GAASA,EAAMS,QAAQ,MAAQ,EACtCR,IAAQD,EAAQA,EAAMU,QAAQ,KAAM,MAG1C,IAAIC,EAASnC,EACXmB,EAAc,IAAIL,EAAaS,EAASC,GAASV,EAAaS,EAASC,GACvEE,EAAevF,KAAO4E,EACtBO,GAKF,OAFIF,GAAiBK,GAAQhB,EAAiB0B,EAAQ,CAAEV,OAAQA,IAEzDU,GAELC,EAAQ,SAAUC,GACpBA,KAAOf,GAAiBrB,EAAeqB,EAAee,EAAK,CACzDC,cAAc,EACdC,IAAK,WAAc,OAAOzB,EAAauB,IACvC3B,IAAK,SAAU8B,GAAM1B,EAAauB,GAAOG,MAGzCC,EAAOtC,EAAoBW,GAC3B4B,EAAQ,EACZ,MAAOD,EAAKE,OAASD,EAAON,EAAMK,EAAKC,MACvC3B,EAAgBe,YAAcR,EAC9BA,EAAcN,UAAYD,EAC1BR,EAAST,EAAQ,SAAUwB,GAI7BX,EAAW,W,yDCnFX,yBAAgX,EAAG","file":"js/chunk-11fd17c5.b7154f4b.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./upload-file.css?vue&type=style&index=1&id=abe5113c&scoped=scoped&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./upload-file.css?vue&type=style&index=1&id=abe5113c&scoped=scoped&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('onekit-page',[_c('import',{attrs:{\"src\":\"../../../common/head.vue\"}}),_c('import',{attrs:{\"src\":\"../../../common/foot.vue\"}}),_c('onekit-view',{staticClass:\"container\"},[_c('onekit-view',{staticClass:\"page-body\"},[_c('onekit-view',{staticClass:\"page-section\"},[(_vm.fileUploaded)?_c('onekit-block',[_c('onekit-view',{staticClass:\"weui-cells weui-cells_after-title\"},[_c('onekit-view',{staticClass:\"weui-cell weui-cell_input\"},[_c('onekit-view',{staticClass:\"weui-cell__hd\"},[_c('onekit-view',{staticClass:\"weui-label\"},[_vm._v(\"文件 ID\")])],1),_c('onekit-view',{staticClass:\"weui-cell__bd\"},[_c('onekit-textarea',{staticClass:\"weui-textarea\",staticStyle:{\"height\":\"3.3em\"},attrs:{\"value\":_vm.fileId,\"disabled\":\"\"}})],1)],1),_c('onekit-view',{staticClass:\"weui-cell page-section-ctn\"},[_c('onekit-image',{staticClass:\"image\",attrs:{\"src\":_vm.filePath,\"mode\":\"aspectFit\"}})],1)],1),(_vm.fromOtherPage)?_c('onekit-view',{staticClass:\"btn-area\"},[_c('onekit-navigator',{attrs:{\"open-type\":\"navigateBack\"}},[_c('onekit-button',{attrs:{\"type\":\"primary\",\"size\":\"40\"}},[_vm._v(\"返回\")])],1)],1):_vm._e()],1):_c('onekit-block',[_c('onekit-view',{staticClass:\"page-body-info\"},[_c('onekit-view',{staticClass:\"image-plus image-plus-nb\",on:{\"tap\":_vm.chooseImage}},[_c('onekit-view',{staticClass:\"image-plus-horizontal\"}),_c('onekit-view',{staticClass:\"image-plus-vertical\"})],1),_c('onekit-view',{staticClass:\"image-plus-text\"},[_vm._v(\"选择图片\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import PAGE_JSON from './upload-file.json';\nimport {OnekitApp,OnekitPage,OnekitComponent} from \"../../../onekit/onekit.js\";\nimport wx from \"../../../onekit/wx.js\";\nconst app = getApp();\nOnekitPage({\n    onShareAppMessage:function(){\n        return {\n            title:'上传文件',\n            path:'page/cloud/pages/upload-file/upload-file'\n        };\n    },\n    data:{\n        fileUploaded:false,\n        fileId:'',\n        filePath:'',\n        fromOtherPage:false\n    },\n    onLoad:function(options){\n        if(options.from){\n            this.setData({\n                fromOtherPage:true\n            });\n        }\n    },\n    chooseImage:function(){\n        const self = this;\n        wx.chooseImage({\n            count:1,\n            sizeType:[\n                'compressed'\n            ],\n            sourceType:[\n                'album'\n            ],\n            success:function(res){\n                console.log('chooseImage success, temp path is',res.tempFilePaths[0]);\n                const filePath = res.tempFilePaths[0];\n                wx.showLoading({\n                    title:'上传中'\n                });\n                app.getUserOpenIdViaCloud().then((openid)=>{\n    const cloudPath = ('upload/' + openid) + filePath.match(new RegExp(\"\\.[^.]+?$\",\"\"))[0];\n    console.log('cloudPath',cloudPath);\n    wx.cloud.uploadFile({\n        cloudPath:cloudPath,\n        filePath:filePath,\n        success:(res)=>{\n            console.log('[上传文件] 成功：',res);\n            app.globalData.fileId = res.fileID;\n            self.setData({\n                fileUploaded:true,\n                fileId:res.fileID,\n                filePath:filePath\n            });\n            wx.hideLoading();\n        },\n        fail:(err)=>{\n            console.error('[上传文件] 失败：',err);\n            wx.hideLoading();\n            wx.showToast({\n                icon:'none',\n                title:'上传失败'\n            });\n        }\n    });\n    return openid;\n}).catch((err)=>{\n                    console.error(err);\n                    wx.hideLoading();\n                });\n            },\n            fail:function({errMsg}){\n                console.log('chooseImage fail, err is',errMsg);\n            }\n        });\n    }\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/eslint-loader/index.js??ref--13-0!./upload-file.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/eslint-loader/index.js??ref--13-0!./upload-file.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload-file.vue?vue&type=template&id=abe5113c&scoped=true&\"\nimport script from \"./upload-file.js?vue&type=script&lang=js&\"\nexport * from \"./upload-file.js?vue&type=script&lang=js&\"\nimport style0 from \"@/onekit/onekit.css?vue&type=style&index=0&id=abe5113c&scoped=true&lang=css&\"\nimport style1 from \"./upload-file.css?vue&type=style&index=1&id=abe5113c&scoped=scoped&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"abe5113c\",\n  null\n  \n)\n\nexport default component.exports","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.github.io/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.github.io/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=abe5113c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!./onekit.css?vue&type=style&index=0&id=abe5113c&scoped=true&lang=css&\""],"sourceRoot":""}